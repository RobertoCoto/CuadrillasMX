<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fyg.cuadrillas.dao.EmpleadoNTx">

<resultMap type="Empleado" id="empleado">
	<result column="id_empleado" property="idEmpleado"/>
	<result column="nombre" property="nombre"/>
	<result column="apellido_pat" property="apellidoPat"/>
	<result column="apellido_mat" property="apellidoMat"/>
	<result column="sexo" property="sexo"/>
	<result column="rfc" property="rfc"/>
	<result column="rfc_calculado" property="rfcCalculado"/>
	<result column="fecha_nacimiento" property="fechaNacimiento"/>
	<result column="fecha_ingreso" property="fechaIngreso"/>
	<result column="codigo_puesto" property="codigoPuesto"/>
	<result column="codigo_vialidad" property="codigoVialidad"/>
	<result column="codigo_area" property="codigoArea"/>
	<result column="codigo_talla" property="codigoTalla"/>
	<result column="sueldo" property="sueldo"/>
	<result column="frecuencia_pago" property="frecuenciaPago"/>
	<result column="nss" property="nss"/>
	<result column="no_credito_infonavit" property="noCreditoInfonavit"/>
	<result column="telefono" property="telefono"/>
	<result column="observaciones" property="observaciones"/>
	<result column="fecha_baja" property="fechaBaja"/>
	<result column="codigo_tipo_salida" property="codigoTipoSalida"/>
	<result column="codigo_causa_salida" property="codigoCausaSalida"/>
	<result column="estatus" property="estatus"/>
</resultMap>

<select id="consultaEmpleado" parameterType="Empleado" resultMap="empleado">
	SELECT
		id_empleado, nombre, apellido_pat, apellido_mat, sexo, rfc, rfc_calculado, fecha_nacimiento, fecha_ingreso,
		codigo_puesto, codigo_vialidad, codigo_area,  codigo_talla, sueldo, frecuencia_pago,
		nss, no_credito_infonavit, telefono, observaciones,
		fecha_baja, codigo_tipo_salida, codigo_causa_salida, estatus
	FROM empleado
	<where>
	<if test="idEmpleado !=null">
	 id_empleado = #{idEmpleado}
	 </if>
	 <!-- 
	 <if test="nombre != null">
	 AND nombre like #{nombre}
	  </if>
	 <if test="apellidoPat !=null">
	 AND apellido_pat like #{apellidoPat}
	 </if>
	 <if test="apellidoMat !=null">
	 AND apellido_mat like #{apellidoMat}
	 </if>
	 <if test="rfc !=null">
	 AND rfc like #{rfc}
	 </if>
	  -->
	</where>
</select>

<select id="empleadoActivo" parameterType="asistencia" resultType="int">
SELECT count(estatus) as estatus
FROM empleado 
WHERE id_empleado = #{idEmpleado}
AND estatus ='I'
</select>

</mapper>